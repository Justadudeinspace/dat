# LRC integration

DAT can ingest metadata generated by the LRC toolchain to align audit policy with organisational requirements.

## Configuration file

DAT searches for `~/.config/lrc/dat_integration.json` unless overridden with the `LRC_CONFIG_PATH` environment variable. The
configuration file must contain a `schemas` array. Each schema may target specific repositories via the `repos` key. When the key
is omitted or the array is empty, the schema applies to every repository.

```json
{
  "schemas": [
    {
      "repos": ["dat"],
      "owner": "lrc-platform",
      "compliance": "soc2",
      "rules": [
        {"id": "lrc.no-secret", "patterns": ["SECRET="], "severity": "critical"}
      ]
    }
  ]
}
```

## Rule semantics

Each rule entry must provide:

- `id` – unique identifier displayed inside reports.
- `patterns` – string or list of strings to search for (literal substring matching).
- `severity` – optional severity label (defaults to `medium`).
- `description` – optional human readable explanation.

LRC supplied rules augment the default DAT policy; they never replace builtin coverage unless the same `id` is reused.

## Metadata propagation

Any additional keys such as `owner`, `repository`, `compliance`, or `notes` are surfaced in generated reports and PDF headers to
provide context for downstream systems.

## Failure modes

- Invalid JSON raises a clear error and falls back to default policies.
- Missing configuration files are ignored silently.
- Unknown keys are preserved in the metadata block but do not influence rule evaluation.
